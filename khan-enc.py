import base64
exec(base64.b64decode("IyBEZWNvbXBpbGUgYnkgTWFyZGlzIChUb29scyBCeSBLYXB0ZW4tS2Fpem8pCiMgVGltZSBTdWNjZXMgZGVjb21waWxlIDogMjAyMi0wNi0wNiAxNjoyMzowMS4wNDE4NTgKaW1wb3J0IG9zLCBzeXMsIHRpbWUsIGRhdGV0aW1lLCByZSwgdGhyZWFkaW5nLCBqc29uLCByYW5kb20sIHJlcXVlc3RzLCBoYXNobGliLCBjb29raWVsaWIsIHV1aWQKZnJvbSBtdWx0aXByb2Nlc3NpbmcucG9vbCBpbXBvcnQgVGhyZWFkUG9vbApmcm9tIHJlcXVlc3RzLmV4Y2VwdGlvbnMgaW1wb3J0IENvbm5lY3Rpb25FcnJvcgpfX2F1dGhvcl9fID0gJ01yLkphbWVzJwpfX2NvcHlyaWdodCA9ICdBbGwgcmlnaHRzIHJlc2VydmVkIC4gQ29weXJpZ2h0ICBNci5KYW1lcycKb3Muc3lzdGVtKCd0ZXJtdXgtc2V0dXAtc3RvcmFnZScpCnRyeToKICAgIG9zLm1rZGlyKCcvc2RjYXJkL2lkcycpCmV4Y2VwdCBPU0Vycm9yOgogICAgcGFzcwoKYmQgPSByYW5kb20ucmFuZGludCgyMDAwMDAwMC4wLCAzMDAwMDAwMC4wKQpzaW0gPSByYW5kb20ucmFuZGludCgyMDAwMCwgNDAwMDApCmhlYWRlciA9IHsneC1mYi1jb25uZWN0aW9uLWJhbmR3aWR0aCc6IHJlcHIoYmQpLCAneC1mYi1zaW0taG5pJzogcmVwcihzaW0pLCAKICAgJ3gtZmItbmV0LWhuaSc6IHJlcHIoc2ltKSwgCiAgICd4LWZiLWNvbm5lY3Rpb24tcXVhbGl0eSc6ICdFWENFTExFTlQnLCAKICAgJ3gtZmItY29ubmVjdGlvbi10eXBlJzogJ2NlbGwuQ1RSYWRpb0FjY2Vzc1RlY2hub2xvZ3lIU0RQQScsIAogICAndXNlci1hZ2VudCc6ICdEYWx2aWsvMS42LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuNC4yOyBOWDU1IEJ1aWxkL0tPVDU1MDYpIFtGQkFOL0ZCNEE7RkJBVi8xMDYuMC4wLjI2LjY4O0ZCQlYvNDU5MDQxNjA7RkJETS97ZGVuc2l0eT0zLjAsd2lkdGg9MTA4MCxoZWlnaHQ9MTkyMH07RkJMQy9pdF9JVDtGQlJWLzQ1OTA0MTYwO0ZCQ1IvUG9zdGVNb2JpbGU7RkJNRi9hc3VzO0ZCQkQvYXN1cztGQlBOL2NvbS5mYWNlYm9vay5rYXRhbmE7RkJEVi9BU1VTX1owMEFEO0ZCU1YvNS4wO0ZCT1AvMTtGQkNBL3g4Njphcm1lYWJpLXY3YTtdJywgCiAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywgCiAgICd4LWZiLWh0dHAtZW5naW5lJzogJ0xpZ2VyJ30Kb3Muc3lzdGVtKCdnaXQgcHVsbCcpCm9zLnN5c3RlbSgnY2xlYXInKQpsb2dvID0gJ1xuXHgxYlsxOzkybSAgICAgICAgICAgICAgXG5ceDFiWzE7OTJtICAgICAgICAgICAgICAgICAgICAgIFxuXHgxYlsxOzk2bSAgICAgICAgICAgICAgICAgICAgICAgIFxuXHgxYlsxOzkybSAgICAge30ge30gIHt9IHt9e317fSB7fXt9e30gXG5ceDFiWzE7OTdtICAgICB7fSB7fSAge30gICB7fSAgICAge30gXG5ceDFiWzE7OTNtICAgICB7fSB7fSAge30gICB7fSAgICAge30gIFxuXHgxYlsxOzk2bSAgICAge30ge30gIHt9ICAge30gICAgIHt9IFxuXHgxYlsxOzk0bSAge317fSAgIHt9e30gICAge30gICAgIHt9ICBcblx4MWJbMTs5M20gICAgICAgICAgICAgICAgICAgICAgXG5ceDFiWzE7OTJtICAgICAgICAgSnV0dCBCYWRzaGFoIEJyYW5kfiAgICAgICAgICAgICAgICAgICAgICAgXG5ceDFiWzE7OTFtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx4MWJbMTs5N21ceGUyXHg5ZVx4YTMgQXV0aG9yIDogSnV0dCBCYWRzaGFoIHggPz8/Pz9cblx4MWJbMTs5N21ceGUyXHg5ZVx4YTMgR2l0aHViIDogaHR0cHM6Ly9naXRodWIuY29tL1NIT09URVItTUFLRVJcblx4MWJbMTs5N21ceGUyXHg5ZVx4YTMgV1AgTk86ICs5MjMwMDc1NzQzMTBcblx4MWJbMTs5MW0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScKCmRlZiByZWcoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgJycKICAgIHByaW50ICdceDFiWzE7MzE7MW1UYWtlIFRoZSBBcHByb3ZhbCBGb3IgTG9naW4gQ2hhcmdlcyAzNTAnCiAgICBwcmludCAnJwogICAgdGltZS5zbGVlcCgxKQogICAgdHJ5OgogICAgICAgIHRvID0gb3BlbignL3NkY2FyZC8uaHN0LnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICByZWcyKCkKCiAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vTXJKYWR1Z2FyL1RyeS9tYWluL1MudHh0JykudGV4dAogICAgaWYgdG8gaW4gcjoKICAgICAgICBvcy5zeXN0ZW0oJ2NkIC4uLi4uICYmIG5wbSBpbnN0YWxsJykKICAgICAgICBvcy5zeXN0ZW0oJ2Z1c2VyIC1rIDUwMDAvdGNwICYnKQogICAgICAgIG9zLnN5c3RlbSgnIycpCiAgICAgICAgb3Muc3lzdGVtKCdjZCAuLi4uLiAmJiBub2RlIGluZGV4LmpzICYnKQogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBpcCgpCiAgICBlbHNlOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnXHRBcHByb3ZlZCBGYWlsZWQnCiAgICAgICAgcHJpbnQgJyBceDFiWzE7OTJtWW91ciBJZCBJcyBOb3QgQXBwcm92ZWQgQWxyZWFkeSAnCiAgICAgICAgcHJpbnQgJyBceDFiWzE7OTJtQ29weSB0aGUgaWQgYW5kIHNlbmQgdG8gYWRtaW4nCiAgICAgICAgcHJpbnQgJyBceDFiWzE7OTJtWW91ciBpZDogJyArIHRvCiAgICAgICAgcmF3X2lucHV0KCdceDFiWzE7OTNtIFByZXNzIGVudGVyIHRvIHNlbmQgaWQnKQogICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly93YS5tZS8rOTIzMTU5NTk5OTcxJykKICAgICAgICByZWcoKQoKCmRlZiByZWcyKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50ICdcdEFwcHJvdmFsIG5vdCBkZXRlY3RlZCcKICAgIHByaW50ICcgXHgxYlsxOzkybUNvcHkgYW5kIHByZXNzIGVudGVyICwgdGhlbiBzZWxlY3Qgd2hhdHNhcHAgdG8gY29udGludWUnCiAgICBpZCA9IHV1aWQudXVpZDQoKS5oZXhbOjUwXQogICAgcHJpbnQgJyBZb3VyIGlkOiAnICsgaWQKICAgIHByaW50ICcnCiAgICByYXdfaW5wdXQoJyBQcmVzcyBlbnRlciB0byBnbyB0byB3aGF0c2FwcCAnKQogICAgb3Muc3lzdGVtKCd4ZGctb3BlbiBodHRwczovL3dhLm1lLys5MjMxNTk1OTk5NzEnKQogICAgc2F2ID0gb3BlbignL3NkY2FyZC8uaHN0LnR4dCcsICd3JykKICAgIHNhdi53cml0ZShpZCkKICAgIHNhdi5jbG9zZSgpCiAgICByYXdfaW5wdXQoJ1x4MWJbMTs5Mm0gUHJlc3MgZW50ZXIgdG8gY2hlY2sgQXBwcm92YWwgJykKICAgIHJlZygpCgoKZGVmIGlwKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50ICdcdENvbGxlY3RpbmcgZGV2aWNlIGluZm8nCiAgICB0cnk6CiAgICAgICAgaXBpbmZvID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vaXAtYXBpLmNvbS9qc29uLycpCiAgICAgICAgeiA9IGpzb24ubG9hZHMoaXBpbmZvLnRleHQpCiAgICAgICAgaXBzID0gelsncXVlcnknXQogICAgICAgIGNvdW50cnkgPSB6Wydjb3VudHJ5J10KICAgICAgICByZWdpID0gelsncmVnaW9uTmFtZSddCiAgICAgICAgbmV0d29yayA9IHpbJ2lzcCddCiAgICBleGNlcHQ6CiAgICAgICAgcGFzcwoKICAgIHByaW50ICdceDFiWzE7OTJtIFlvdXIgaXA6ICcgKyBpcHMKICAgIHRpbWUuc2xlZXAoMSkKICAgIHByaW50ICdceDFiWzE7OTJtIFlvdXIgY291bnRyeTogJyArIGNvdW50cnkKICAgIHRpbWUuc2xlZXAoMSkKICAgIHByaW50ICdceDFiWzE7OTJtIFlvdXIgcmVnaW9uOiAnICsgcmVnaQogICAgdGltZS5zbGVlcCgxKQogICAgcHJpbnQgJyBceDFiWzE7OTJtWW91ciBuZXR3b3JrOiAnICsgbmV0d29yawogICAgdGltZS5zbGVlcCgxKQogICAgcHJpbnQgJyBMb2FkaW5nIC4uLicKICAgIHRpbWUuc2xlZXAoMSkKICAgIGxvZ19tZW51KCkKCgpkZWYgbG9nX21lbnUoKToKICAgIHRyeToKICAgICAgICB0X2NoZWNrID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICdyJykKICAgICAgICBtZW51KCkKICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnXHgxYlsxOzkzbSB+fn5+IExvZ2luIG1lbnUgfn5+flx4MWJbMTs5MW0nCiAgICAgICAgcHJpbnQgNDcgKiAnLScKICAgICAgICBwcmludCAnXHgxYlsxOzkybVsxXSBMb2dpbiB3aXRoIEZhY2VCb29rJwogICAgICAgIHByaW50ICdceDFiWzE7OTJtWzJdIExvZ2luIHdpdGggdG9rZW4nCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bM10gTG9naW4gd2l0aCBjb29raWVzJwogICAgICAgIHByaW50ICcnCiAgICAgICAgbG9nX21lbnVfcygpCgoKZGVmIGxvZ19tZW51X3MoKToKICAgIHMgPSByYXdfaW5wdXQoJyBceDFiWzE7OTdtXHhlMlx4OTVceGIwXHhlMlx4OTRceDgwSnV0dFx4ZTJceDllXHhhNCAnKQogICAgaWYgcyA9PSAnMSc6CiAgICAgICAgbG9nX2ZiKCkKICAgIGVsaWYgcyA9PSAnMic6CiAgICAgICAgbG9nX3Rva2VuKCkKICAgIGVsaWYgcyA9PSAnMyc6CiAgICAgICAgbG9nX2Nvb2tpZSgpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcnCiAgICAgICAgcHJpbnQgJ1xcIFNlbGVjdCB2YWxpZCBvcHRpb24gJwogICAgICAgIHByaW50ICcnCiAgICAgICAgbG9nX21lbnVfcygpCgoKZGVmIGxvZ19mYigpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCAnXHgxYlsxOzMxOzFtTG9naW4gd2l0aCBpZC9wYXNzJwogICAgcHJpbnQgNDcgKiAnLScKICAgIGxpZCA9IHJhd19pbnB1dCgnXHgxYlsxOzkybSBJZC9tYWlsL25vOiAnKQogICAgcHdkcyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5M21QYXNzd29yZDogJykKICAgIHRyeToKICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwd2QpLnRleHQKICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgIHRzID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICd3JykKICAgICAgICAgICAgdHMud3JpdGUocVsnbG9jJ10pCiAgICAgICAgICAgIHRzLmNsb3NlKCkKICAgICAgICAgICAgbWVudSgpCiAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgcHJpbnQgJyBVc2VyIG11c3QgdmVyaWZ5IGFjY291bnQgYmVmb3JlIGxvZ2luJwogICAgICAgICAgICByYXdfaW5wdXQoJ1x4MWJbMTs5Mm0gUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpCiAgICAgICAgICAgIGxvZ19mYigpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQgJyBJZC9QYXNzIG1heSBiZSB3cm9uZycKICAgICAgICAgICAgcmF3X2lucHV0KCcgXHgxYlsxOzkybVByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQogICAgICAgICAgICBsb2dfZmIoKQogICAgZXhjZXB0OgogICAgICAgIHByaW50ICcnCiAgICAgICAgcHJpbnQgJ0V4aXRpbmcgdG9vbCcKICAgICAgICBvcy5zeXN0ZW0oJ2V4aXQnKQoKCmRlZiBsb2dfdG9rZW4oKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgJ1x4MWJbMTs5M21Mb2dpbiB3aXRoIHRva2VuXHgxYlsxOzkxbScKICAgIHByaW50IDQ3ICogJy0nCiAgICB0b2sgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtUGFzdGUgdG9rZW4gaGVyZTogXHgxYlsxOzkxbScpCiAgICBwcmludCA0NyAqICctJwogICAgdF9zID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICd3JykKICAgIHRfcy53cml0ZSh0b2spCiAgICB0X3MuY2xvc2UoKQogICAgbWVudSgpCgoKZGVmIGxvZ19jb29raWUoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgJycKICAgIHByaW50ICdceDFiWzE7MzE7MW1Mb2dpbiBDb29raWVzJwogICAgcHJpbnQgJycKICAgIHRyeToKICAgICAgICBjb29raWUgPSByYXdfaW5wdXQoJyBQYXN0ZSBjb29raWVzIGhlcmU6ICcpCiAgICAgICAgZGF0YSA9IHsndXNlci1hZ2VudCc6ICdNb3ppbGxhLzUuMCAoWDExOyBMaW51eCB4ODZfNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIEtpd2kgQ2hyb21lLzY4LjAuMzQzOC4wIFNhZmFyaS81MzcuMzYnLCAncmVmZXJlcic6ICdodHRwczovL20uZmFjZWJvb2suY29tLycsIAogICAgICAgICAgICdob3N0JzogJ20uZmFjZWJvb2suY29tJywgCiAgICAgICAgICAgJ29yaWdpbic6ICdodHRwczovL20uZmFjZWJvb2suY29tJywgCiAgICAgICAgICAgJ3VwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMnOiAnMScsIAogICAgICAgICAgICdhY2NlcHQtbGFuZ3VhZ2UnOiAnaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcnLCAKICAgICAgICAgICAnY2FjaGUtY29udHJvbCc6ICdtYXgtYWdlPTAnLCAKICAgICAgICAgICAnYWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgnLCAKICAgICAgICAgICAnY29udGVudC10eXBlJzogJ3RleHQvaHRtbDsgY2hhcnNldD11dGYtOCcsIAogICAgICAgICAgICdjb29raWUnOiBjb29raWV9CiAgICAgICAgYzEgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20vY29tcG9zZXIvb2NlbG90L2FzeW5jX2xvYWRlci8/cHVibGlzaGVyPWZlZWQjXz1fJywgaGVhZGVycz1kYXRhKQogICAgICAgIGMyID0gcmUuc2VhcmNoKCcoRUFBQVxcdyspJywgYzEudGV4dCkKICAgICAgICBoYXNpbCA9IGMyLmdyb3VwKDEpCiAgICAgICAgb2sgPSBvcGVuKCdhY2Nlc3NfdG9rZW4udHh0JywgJ3cnKQogICAgICAgIG9rLndyaXRlKGhhc2lsKQogICAgICAgIG9rLmNsb3NlKCkKICAgICAgICBtZW51KCkKICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICBwcmludCAnJwogICAgICAgIHByaW50ICdcdEludmFsaWQgY29va2llcycKICAgICAgICBwcmludCAnJwogICAgICAgIHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1QcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykKICAgICAgICBsb2dfbWVudSgpCiAgICBleGNlcHQgVW5ib3VuZExvY2FsRXJyb3I6CiAgICAgICAgcHJpbnQgJycKICAgICAgICBwcmludCAnXHRJbnZhbGlkIGNvb2tpZXMnCiAgICAgICAgcHJpbnQgJycKICAgICAgICByYXdfaW5wdXQoJyBceDFiWzE7OTJtUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpCiAgICAgICAgbG9nX21lbnUoKQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuU1NMRXJyb3I6CiAgICAgICAgcHJpbnQgJycKICAgICAgICBwcmludCAnXHRJbnZhbGlkIGNvb2tpZXMnCiAgICAgICAgcHJpbnQgJycKICAgICAgICByYXdfaW5wdXQoJyBceDFiWzE7OTJtUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpCiAgICAgICAgbG9nX21lbnUoKQoKCmRlZiBtZW51KCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tlbiA9IG9wZW4oJ2FjY2Vzc190b2tlbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgcHJpbnQgJycKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbUxvZ2luIEZCIGlkIHRvIGNvbnRpbnVlJwogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dfbWVudSgpCgogICAgdHJ5OgogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0nICsgdG9rZW4pCiAgICAgICAgcSA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgIHogPSBxWyduYW1lJ10KICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnJwogICAgICAgIHByaW50ICdcdCBBY2NvdW50IENoZWVrcG9pbnRceDFiWzA7OTdtJwogICAgICAgIHByaW50ICcnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgYWNjZXNzX3Rva2VuLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ19tZW51KCkKICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJycKICAgICAgICBwcmludCAnXHQgVHVybiBvbiBtb2JpbGUgZGF0YS93aWZpXHgxYlswOzk3bScKICAgICAgICBwcmludCAnJwogICAgICAgIHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1QcmVzcyBlbnRlciBhZnRlciB0dXJuaW5nIG9uIG1vYmlsZSBkYXRhL3dpZmkgJykKICAgICAgICBtZW51KCkKCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHRvayA9IG9wZW4oJy9zZGNhcmQvLmhzdC50eHQnLCAncicpLnJlYWQoKQogICAgcHJpbnQgJyAgXHgxYlsxOzkybUxvZ2dlZCBpbiB1c2VyOiBceDFiWzE7OTFtJyArIHoKICAgIHByaW50IDQ3ICogJy0nCiAgICBwcmludCAnIFx4MWJbMTs5M20gQWN0aXZlIHRva2VuOiBceDFiWzE7OTFtJyArIHRvawogICAgcHJpbnQgJyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMV0gQ3JhY2sgd2l0aCBBdXRvIHBhc3N3b3JkIDEwJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMl0gQ3JhY2sgd2l0aCBOdW1iZXIgcGFzc3dvcmQgNicKICAgIHByaW50ICdceDFiWzE7OTJtWzNdIENyYWNrIHdpdGggTmFtZSArIE51bWJlciBwYXNzd29yZCA4JwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bNF0gRXh0cmFjdCBGaWxlJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bNV0gTG9nb3V0JwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bNl0gRGVsZXRlIHRyYXNoIGZpbGVzJwogICAgbWVudV9zKCkKCgpkZWYgbWVudV9zKCk6CiAgICBtcyA9IHJhd19pbnB1dCgnXHgxYlsxOzk3bVx4ZTJceDk1XHhiMFx4ZTJceDk0XHg4MGp1dHRceGUyXHg5ZVx4YTQgJykKICAgIGlmIG1zID09ICcxJzoKICAgICAgICBhdXRvX2NyYWNrKCkKICAgIGVsaWYgbXMgPT0gJzInOgogICAgICAgIGNob2ljZV9jcmFjaygpCiAgICBlbGlmIG1zID09ICczJzoKICAgICAgICBuYW1lX2NyYWNrKCkKICAgIGVsaWYgbXMgPT0gJzQnOgogICAgICAgIG9zLnN5c3RlbSgncHl0aG9uMiBvay5weScpCiAgICBlbGlmIG1zID09ICc1JzoKICAgICAgICBsb3V0KCkKICAgIGVsaWYgbXMgPT0gJzYnOgogICAgICAgIHJ0cmFzaCgpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcnCiAgICAgICAgcHJpbnQgJ1x0U2VsZWN0IHZhbGlkIG9wdGlvbicKICAgICAgICBwcmludCAnJwogICAgICAgIG1lbnVfcygpCgoKZGVmIGNyYWNrKCk6CiAgICBnbG9iYWwgdG9rZXQKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x0IEZpbGUgTm90IEZvdW5kIFx4MWJbMDs5N20nCiAgICAgICAgcHJpbnQgJycKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9nX21lbnUoKQoKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IEF1dG8gcGFzcyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScKICAgIHByaW50IDQ3ICogJy0nCiAgICBwcmludCAnXHgxYlsxOzkybVsxXSBQdWJsaWMgaWQgY2xvbmluZycKICAgIHByaW50ICdceDFiWzE7OTJtWzJdIEZvbGxvd2VycyBjbG9uaW5nJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bM10gRmlsZSBjbG9uaW5nJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMF0gQmFjaycKICAgIGFfcygpCgoKZGVmIGF1dG9fY3JhY2soKToKICAgIGdsb2JhbCB0b2tlbgogICAgdHJ5OgogICAgICAgIHRva2VuID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x0IExvZ2luIEZCIGlkIHRvIGNvbnRpbnVlXHgxYlswOzk3bScKICAgICAgICBwcmludCAnJwogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dfbWVudSgpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gQXV0byBwYXNzIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJwogICAgcHJpbnQgNDcgKiAnLScKICAgIHByaW50ICdceDFiWzE7OTJtWzFdIFB1YmxpYyBpZCBjbG9uaW5nJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMl0gRm9sbG93ZXJzIGNsb25pbmcnCiAgICBwcmludCAnXHgxYlsxOzkybVszXSBGaWxlIGNsb25pbmcnCiAgICBwcmludCAnXHgxYlsxOzkybVtCXSBCYWNrJwogICAgYV9zKCkKCgpkZWYgYV9zKCk6CiAgICBpZCA9IFtdCiAgICBjcHMgPSBbXQogICAgb2tzID0gW10KICAgIGFfcyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5N21ceGUyXHg5NVx4YjBceGUyXHg5NFx4ODBqdXR0XHhlMlx4OWVceGE0ICcpCiAgICBpZiBhX3MgPT0gJzEnOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gQXV0byBwYXNzIHB1YmxpYyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScKICAgICAgICBwcmludCA0NyAqICctJwogICAgICAgIGlkdCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5M21bXHhlMlx4OThceDg1XUVudGVyIGlkOiAnKQogICAgICAgIHRyeToKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikKICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgICAgICB6ID0gcVsnbmFtZSddCiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fkF1dG8gcGFzcyBwdWJsaWMgY3JhY2tpbmd+fn5+JwogICAgICAgICAgICBwcmludCAnIFx4MWJbMTs5Mm1DbG9uaW5nIGZyb206ICcgKyB6CiAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgICAgIHByaW50ICdcdCBJbnZhbGlkIHVzZXIgXHgxYlswOzk3bScKICAgICAgICAgICAgcmF3X2lucHV0KCcgXHgxYlsxOzkybVByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQogICAgICAgICAgICBhdXRvX2NyYWNrKCkKCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICcvZnJpZW5kcz9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQogICAgICAgIHogPSBqc29uLmxvYWRzKHIudGV4dCkKICAgICAgICBmb3IgaSBpbiB6WydkYXRhJ106CiAgICAgICAgICAgIHVpZCA9IGlbJ2lkJ10KICAgICAgICAgICAgbmEgPSBpWyduYW1lJ10KICAgICAgICAgICAgbm0gPSBuYS5yc3BsaXQoJyAnKVswXQogICAgICAgICAgICBpZC5hcHBlbmQodWlkICsgJ3wnICsgbm0pCgogICAgZWxpZiBhX3MgPT0gJzInOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gTmFtZSBwYXNzIGZvbGxvd2VycyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScKICAgICAgICBwcmludCA0NyAqICctJwogICAgICAgIHByaW50ICcgXHgxYlsxOzkzbUZvciBleGFtcGxlOjEyMywxMjM0LDEyMzQ1LDc4NiwxMiwxMTIyXHgxYlsxOzkxbScKICAgICAgICBwcmludCA0NyAqICctJwogICAgCiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJz9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQogICAgICAgICAgICBxID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIHogPSBxWyduYW1lJ10KICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgICAgIHByaW50IGxvZ28KICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE5hbWUgcGFzcyBmb2xsb3dlcnMgY3JhY2tpbmcgfn5+ficKICAgICAgICAgICAgcHJpbnQgJyBceDFiWzE7OTJtQ2xvbmluZyBmcm9tOiAnICsgegogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgICAgICBwcmludCAnXHQgSW52YWxpZCB1c2VyIFx4MWJbMDs5N20nCiAgICAgICAgICAgIHJhd19pbnB1dCgnXHgxYlsxOzkybVByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQogICAgICAgICAgICBhdXRvX2NyYWNrKCkKCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICcvc3Vic2NyaWJlcnM/YWNjZXNzX3Rva2VuPScgKyB0b2tlbiArICcmbGltaXQ9OTk5OTk5JykKICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgZm9yIGkgaW4gelsnZGF0YSddOgogICAgICAgICAgICB1aWQgPSBpWydpZCddCiAgICAgICAgICAgIG5hID0gaVsnbmFtZSddCiAgICAgICAgICAgIG5tID0gbmEucnNwbGl0KCcgJylbMF0KICAgICAgICAgICAgaWQuYXBwZW5kKHVpZCArICd8JyArIG5tKQoKICAgIGVsaWYgYV9zID09ICczJzoKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IEF1dG8gcGFzcyBGaWxlIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJwogICAgICAgIHByaW50IDQ3ICogJy0nCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZGxpc3QgPSByYXdfaW5wdXQoJ1srXSBGaWxlIE5hbWU6ICcpCiAgICAgICAgICAgIGZvciBsaW5lIGluIG9wZW4oaWRsaXN0LCAncicpLnJlYWRsaW5lcygpOgogICAgICAgICAgICAgICAgaWQuYXBwZW5kKGxpbmUuc3RyaXAoKSkKCiAgICAgICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdbIV0gRmlsZSBOb3QgRm91bmQuJwogICAgICAgICAgICByYXdfaW5wdXQoJ1ByZXNzIEVudGVyIFRvIEJhY2suICcpCiAgICAgICAgICAgIGNyYWNrKCkKCiAgICBlbGlmIGFfcyA9PSAnMCc6CiAgICAgICAgbWVudSgpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcnCiAgICAgICAgcHJpbnQgJ1x0Q2hvb3NlIHZhbGlkIG9wdGlvbicgKyB3CiAgICAgICAgYV9zKCkKICAgIHByaW50ICcgVG90YWwgaWRzOiAnICsgc3RyKGxlbihpZCkpCiAgICB0aW1lLnNsZWVwKDAuNSkKICAgIHByaW50ICcgXHgxYlsxOzk3bUNyYWNrIFJ1bm5pbmdceDFiWzE7OTFtICcKICAgIHRpbWUuc2xlZXAoMC41KQogICAgcHJpbnQgNDcgKiAnLScKICAgIHByaW50ICdcdFx4MWJbMTs5NG1KdXR0IEtpbmcgT2YgRmFjZWJvb2tceDFiWzE7OTFtJwogICAgcHJpbnQgNDcgKiAnLScKCiAgICBkZWYgbWFpbihhcmcpOgogICAgICAgIHVzZXIgPSBhcmcKICAgICAgICB1aWQsIG5hbWUgPSB1c2VyLnNwbGl0KCd8JykKICAgICAgICB0cnk6CiAgICAgICAgICAgIHBhc3MxID0gbmFtZS5sb3dlcigpICsgJzEyMzQ1JwogICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMSwgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMSArICdceDFiWzA7OTdtJwogICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczEgKyAnXG4nKQogICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMSkKICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczEKICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MxICsgJ1xuJykKICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkICsgcGFzczEpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwYXNzMiA9IG5hbWUubG93ZXIoKSArICcxMjM0JwogICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczIsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczIgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczIgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3MyKQogICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MyCiAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MyICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgY3BzLmFwcGVuZCh1aWQgKyBwYXNzMikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcGFzczMgPSBuYW1lLmxvd2VyKCkgKyAnNzg2JwogICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3MzLCBoZWFkZXJzPWhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3MzICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczMgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczMpCiAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzMwogICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MzICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCArIHBhc3MzKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3M0ID0gbmFtZS5sb3dlcigpICsgJzEyMycKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczQsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczQgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M0ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczQpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNCArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3M1ID0gJzIzNDU2NycKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M1LCBoZWFkZXJzPWhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M1ICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M1ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNSArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzNiA9ICcyMjMzNDQnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczYsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczYgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNiArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M2CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczYgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3M3ID0gJzMzNDQ1NScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczcsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczcgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M3ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNyArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3M4ID0gJzQ0NTU2NicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M4LCBoZWFkZXJzPWhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M4ICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M4ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzOCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzOAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzOCArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzOSA9ICcwMDA3ODYnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczksIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczkgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzOSArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzOSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczkgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MxMCA9ICc3ODYwMDAnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3MxMCwgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMTAgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MxMCArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3MxMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMTAgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczEwKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwoKICAgIHAgPSBUaHJlYWRQb29sKDMwKQogICAgcC5tYXAobWFpbiwgaWQpCiAgICBwcmludCA0NyAqICctJwogICAgcHJpbnQgJyBceDFiWzE7OTJtQ3JhY2sgRG9uZScKICAgIHByaW50ICcgXHgxYlsxOzkybVRvdGFsIE9rL0NwOicgKyBzdHIobGVuKG9rcykpICsgJy8nICsgc3RyKGxlbihjcHMpKQogICAgcHJpbnQgNDcgKiAnLScKICAgIHJhd19pbnB1dCgnIFx4MWJbMTs5M21QcmVzcyBlbnRlciB0byBiYWNrJykKICAgIGF1dG9fY3JhY2soKQoKCmRlZiBjcmFja19iKCk6CiAgICBnbG9iYWwgdG9rZXQKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x0IEZpbGUgTm90IEZvdW5kIFx4MWJbMDs5N20nCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ19tZW51KCkKCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOdW1iZXIgcGFzcyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScKICAgIHByaW50IDQ3ICogJy0nCiAgICBwcmludCAnXHgxYlsxOzkybVsxXSBQdWJsaWMgaWQgY2xvbmluZycKICAgIHByaW50ICdceDFiWzE7OTJtWzJdIEZvbGxvd2VycyBjbG9uaW5nJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bM10gRmlsZSBjbG9uaW5nJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMF0gQmFjaycKICAgIGNfcygpCgoKZGVmIGNob2ljZV9jcmFjaygpOgogICAgZ2xvYmFsIHRva2VuCiAgICB0cnk6CiAgICAgICAgdG9rZW4gPSBvcGVuKCdhY2Nlc3NfdG9rZW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnXHgxYlsxOzkzbX5+fiBMb2dpbiBGQiBpZCB0byBjb250aW51ZSB+fn4nCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ19tZW51KCkKCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOdW1iZXIgcGFzcyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScKICAgIHByaW50IDQ3ICogJy0nCiAgICBwcmludCAnXHgxYlsxOzkybVsxXSBQdWJsaWMgaWQgY2xvbmluZycKICAgIHByaW50ICdceDFiWzE7OTJtWzJdIEZvbGxvd2VycyBjbG9uaW5nJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bM10gRmlsZSBjbG9uaW5nJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bQl0gQmFjaycKICAgIGNfcygpCgoKZGVmIGNfcygpOgogICAgaWQgPSBbXQogICAgY3BzID0gW10KICAgIG9rcyA9IFtdCiAgICBhX3MgPSByYXdfaW5wdXQoJyBceDFiWzE7OTdtXHhlMlx4OTVceGIwXHhlMlx4OTRceDgwanV0dFx4ZTJceDllXHhhNCAnKQogICAgaWYgYV9zID09ICcxJzoKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M20gfn5+fiBOdW1iZXIgcGFzcyBQdWJsaWMgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nCiAgICAgICAgcHJpbnQgNDcgKiAnLScKICAgICAgICBwcmludCAnXHgxYlsxOzkzbSBGb3IgZXhhbXBsZToyMzQ1NjcsMjIzMzQ0LDMzNDQ1NSw0NDU1NjZceDFiWzE7OTFtJwogICAgICAgIHByaW50IDQ3ICogJy0nCiAgICAgICAgCiAgICAgICAgcGFzczYgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzZdUGFzc3dvcmQ6ICcpCiAgICAgICAgaWR0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkzbVtceGUyXHg5OFx4ODVdRW50ZXIgaWQ6ICcpCiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJz9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQogICAgICAgICAgICBxID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIHogPSBxWyduYW1lJ10KICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgICAgIHByaW50IGxvZ28KICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M20gfn5+fiBOdW1iZXIgcGFzcyBQdWJsaWMgY3JhY2tpbmcgfn5+ficKICAgICAgICAgICAgcHJpbnQgJyBDbG9uaW5nIGZyb206ICcgKyB6CiAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgICAgIHByaW50ICdcdCBJbnZhbGlkIHVzZXIgXHgxYlswOzk3bScKICAgICAgICAgICAgcmF3X2lucHV0KCcgUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpCiAgICAgICAgICAgIGNob2ljZV9jcmFjaygpCgogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnL2ZyaWVuZHM/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikKICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgZm9yIGkgaW4gelsnZGF0YSddOgogICAgICAgICAgICB1aWQgPSBpWydpZCddCiAgICAgICAgICAgIG5hID0gaVsnbmFtZSddCiAgICAgICAgICAgIG5tID0gbmEucnNwbGl0KCcgJylbMF0KICAgICAgICAgICAgaWQuYXBwZW5kKHVpZCArICd8JyArIG5tKQoKICAgIGVsaWYgYV9zID09ICcyJzoKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE51bWJlciBwYXNzIGZvbGxvd2VycyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScKICAgICAgICBwcmludCA0NyAqICctJwogICAgICAgIHByaW50ICdceDFiWzE7OTNtIEZvciBleGFtcGxlOjIzNDU2NywyMjMzNDQsMzM0NDU1LDQ0NTU2Nlx4MWJbMTs5MW0nCiAgICAgICAgcHJpbnQgNDcgKiAnLScKICAgICAgICAKICAgICAgICBwYXNzMyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bM11QYXNzd29yZDogJykKICAgICAgICBwYXNzNCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNF1QYXNzd29yZDogJykKICAgICAgICBpZHQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTNtRW50ZXIgaWQ6ICcpCiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJz9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQogICAgICAgICAgICBxID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIHogPSBxWyduYW1lJ10KICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgICAgIHByaW50IGxvZ28KICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE51bWJlciBwYXNzIGZvbGxvd2VycyBjcmFja2luZyB+fn5+JwogICAgICAgICAgICBwcmludCAnIENsb25pbmcgZnJvbTogJyArIHoKICAgICAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICAgICAgcHJpbnQgJ1x0IEludmFsaWQgdXNlciBceDFiWzA7OTdtJwogICAgICAgICAgICByYXdfaW5wdXQoJ1ByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQogICAgICAgICAgICBhdXRvX2NyYWNrKCkKCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICcvc3Vic2NyaWJlcnM/YWNjZXNzX3Rva2VuPScgKyB0b2tlbiArICcmbGltaXQ9OTk5OTk5JykKICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgZm9yIGkgaW4gelsnZGF0YSddOgogICAgICAgICAgICB1aWQgPSBpWydpZCddCiAgICAgICAgICAgIG5hID0gaVsnbmFtZSddCiAgICAgICAgICAgIG5tID0gbmEucnNwbGl0KCcgJylbMF0KICAgICAgICAgICAgaWQuYXBwZW5kKHVpZCArICd8JyArIG5tKQoKICAgIGVsaWYgYV9zID09ICczJzoKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M20gfn5+fiBOdW1iZXIgcGFzcyBGaWxlIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJwogICAgICAgIHByaW50IDQ3ICogJy0nCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M20gRm9yIGV4YW1wbGU6MjM0NTY3LDIyMzM0NCwzMzQ0NTUsNDQ1NTY2XHgxYlsxOzkxbScKICAgICAgICBwcmludCA0NyAqICctJwogICAgICAgIAogICAgICAgIHBhc3M2ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs2XVBhc3N3b3JkOiAnKQogICAgICAgIHRyeToKICAgICAgICAgICAgaWRsaXN0ID0gcmF3X2lucHV0KCdbK10gRmlsZSBOYW1lOiAnKQogICAgICAgICAgICBmb3IgbGluZSBpbiBvcGVuKGlkbGlzdCwgJ3InKS5yZWFkbGluZXMoKToKICAgICAgICAgICAgICAgIGlkLmFwcGVuZChsaW5lLnN0cmlwKCkpCgogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBwcmludCAnWyFdIEZpbGUgTm90IEZvdW5kLicKICAgICAgICAgICAgcmF3X2lucHV0KCdQcmVzcyBFbnRlciBUbyBCYWNrLiAnKQogICAgICAgICAgICBjcmFja19iKCkKCiAgICBlbGlmIGFfcyA9PSAnMCc6CiAgICAgICAgbWVudSgpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcnCiAgICAgICAgcHJpbnQgJ1x0IENob29zZSB2YWxpZCBvcHRpb24nICsgdwogICAgICAgIGNfcygpCiAgICBwcmludCAnIFRvdGFsIGlkczogJyArIHN0cihsZW4oaWQpKQogICAgdGltZS5zbGVlcCgwLjUpCiAgICBwcmludCAnIFx4MWJbMTs5N21+fn4gQ3JhY2sgUnVubmluZyB+fn5ceDFiWzE7OTFtJwogICAgdGltZS5zbGVlcCgwLjUpCiAgICBwcmludCA0NyAqICctJwogICAgcHJpbnQgJ1x0XHgxYlsxOzk0bUp1dHQgS2luZyBPZiBGY2Vib29rXHgxYlsxOzkxbScKICAgIHByaW50IDQ3ICogJy0nCgogICAgZGVmIG1haW4oYXJnKToKICAgICAgICB1c2VyID0gYXJnCiAgICAgICAgdWlkLCBuYW1lID0gdXNlci5zcGxpdCgnfCcpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMSwgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMSArICdceDFiWzA7OTdtJwogICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczEgKyAnXG4nKQogICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMSkKICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczEKICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MxICsgJ1xuJykKICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkICsgcGFzczEpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMiwgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMiArICdceDFiWzA7OTdtJwogICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMiArICdcbicpCiAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczIpCiAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczIKICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczIgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCArIHBhc3MyKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMywgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMyArICdceDFiWzA7OTdtJwogICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MzICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3MzKQogICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczMKICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMyArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcGVuZCh1aWQgKyBwYXNzMykKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzNCwgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzNCArICdceDFiWzA7OTdtJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczQgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzNCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M0ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M0KQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczUsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczUgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczUgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M1ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M2LCBoZWFkZXJzPWhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M2ICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczYgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M2ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNikKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKCiAgICBwID0gVGhyZWFkUG9vbCgzMCkKICAgIHAubWFwKG1haW4sIGlkKQogICAgcHJpbnQgNDcgKiAnLScKICAgIHByaW50ICcgXHgxYlsxOzkybUNyYWNrIERvbmUnCiAgICBwcmludCAnXHgxYlsxOzkybSBUb3RhbCBPay9DcDonICsgc3RyKGxlbihva3MpKSArICcvJyArIHN0cihsZW4oY3BzKSkKICAgIHByaW50IDQ3ICogJy0nCiAgICByYXdfaW5wdXQoJ1x4MWJbMTs5M20gUHJlc3MgZW50ZXIgdG8gYmFjaycpCiAgICBjaG9pY2VfY3JhY2soKQoKCmRlZiBjcmFja19iKCk6CiAgICBnbG9iYWwgdG9rZXQKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x0IEZpbGUgTm90IEZvdW5kIFx4MWJbMDs5N20nCiAgICAgICAgcHJpbnQgJycKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9nX21lbnUoKQoKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE5hbWUgKyBOdW1iZXIgcGFzcyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScKICAgIHByaW50IDQ3ICogJy0nCiAgICBwcmludCAnXHgxYlsxOzkybVsxXSBQdWJsaWMgaWQgY2xvbmluZycKICAgIHByaW50ICdceDFiWzE7OTJtWzJdIEZvbGxvd2VycyBjbG9uaW5nJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bM10gRmlsZSBjbG9uaW5nJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMF0gQmFjaycKICAgIGFfcygpCgoKZGVmIG5hbWVfY3JhY2soKToKICAgIGdsb2JhbCB0b2tlbgogICAgdHJ5OgogICAgICAgIHRva2VuID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgJ1x0IExvZ2luIEZCIGlkIHRvIGNvbnRpbnVlXHgxYlswOzk3bScKICAgICAgICBwcmludCAnJwogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dfbWVudSgpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gTmFtZSArIE51bWJlciBwYXNzIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJwogICAgcHJpbnQgNDcgKiAnLScKICAgIHByaW50ICdceDFiWzE7OTJtWzFdIFB1YmxpYyBpZCBjbG9uaW5nJwogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMl0gRm9sbG93ZXJzIGNsb25pbmcnCiAgICBwcmludCAnXHgxYlsxOzkybVszXSBGaWxlIGNsb25pbmcnCiAgICBwcmludCAnXHgxYlsxOzkybVtCXSBCYWNrJwogICAgbl9zKCkKCgpkZWYgbl9zKCk6CiAgICBpZCA9IFtdCiAgICBjcHMgPSBbXQogICAgb2tzID0gW10KICAgIGFfcyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5N21ceGUyXHg5NVx4YjBceGUyXHg5NFx4ODBqdXR0XHhlMlx4OWVceGE0ICcpCiAgICBpZiBhX3MgPT0gJzEnOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gTmFtZSArIE51bWJlciBwYXNzIHB1YmxpYyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScKICAgICAgICBwcmludCA0NyAqICctJwogICAgICAgIHByaW50ICdceDFiWzE7OTNtRm9yIGV4YW1wbGU6MTIzLDEyMzQsMTIzNDUsNzg2LDEyLDExMjJceDFiWzE7OTFtJwogICAgICAgIHByaW50IDQ3ICogJy0nCiAgICAgICAgCiAgICAgICAgcDQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzRdTmFtZSArIGRpZ2l0OiAnKQogICAgICAgIHBhc3M1ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs1XVBhc3N3b3JkOiAnKQogICAgICAgIAogICAgICAgIHBhc3M4ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs4XVBhc3N3b3JkOiAnKQogICAgICAgIGlkdCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5M21bXHhlMlx4OThceDg1XUVudGVyIGlkOiAnKQogICAgICAgIHRyeToKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikKICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgICAgICB6ID0gcVsnbmFtZSddCiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fk5hbWUgcGFzcyBwdWJsaWMgY3JhY2tpbmd+fn5+JwogICAgICAgICAgICBwcmludCAnIFx4MWJbMTs5Mm1DbG9uaW5nIGZyb206ICcgKyB6CiAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgICAgIHByaW50ICdcdCBJbnZhbGlkIHVzZXIgXHgxYlswOzk3bScKICAgICAgICAgICAgcmF3X2lucHV0KCcgXHgxYlsxOzkybVByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQogICAgICAgICAgICBuYW1lX2NyYWNrKCkKCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICcvZnJpZW5kcz9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQogICAgICAgIHogPSBqc29uLmxvYWRzKHIudGV4dCkKICAgICAgICBmb3IgaSBpbiB6WydkYXRhJ106CiAgICAgICAgICAgIHVpZCA9IGlbJ2lkJ10KICAgICAgICAgICAgbmEgPSBpWyduYW1lJ10KICAgICAgICAgICAgbm0gPSBuYS5yc3BsaXQoJyAnKVswXQogICAgICAgICAgICBpZC5hcHBlbmQodWlkICsgJ3wnICsgbm0pCgogICAgZWxpZiBhX3MgPT0gJzInOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gTmFtZSBwYXNzIGZvbGxvd2VycyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScKICAgICAgICBwcmludCA0NyAqICctJwogICAgICAgIHByaW50ICcgXHgxYlsxOzkzbUZvciBleGFtcGxlOjEyMywxMjM0LDEyMzQ1LDc4NiwxMiwxMTIyXHgxYlsxOzkxbScKICAgICAgICBwcmludCA0NyAqICctJwogICAgICAgIHAxID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVsxXU5hbWUgKyBkaWdpdDogJykKICAgICAgICBwMiA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bMl1OYW1lICsgZGlnaXQ6ICcpCiAgICAgICAgcDMgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzNdTmFtZSArIGRpZ2l0OiAnKQogICAgICAgIHA0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs0XU5hbWUgKyBkaWdpdDogJykKICAgICAgICBpZHQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTNtW1x4ZTJceDk4XHg4NV1FbnRlciBpZDogJykKICAgICAgICB0cnk6CiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZW4pCiAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKHIudGV4dCkKICAgICAgICAgICAgeiA9IHFbJ25hbWUnXQogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICAgICAgcHJpbnQgbG9nbwogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gTmFtZSBwYXNzIGZvbGxvd2VycyBjcmFja2luZyB+fn5+JwogICAgICAgICAgICBwcmludCAnIFx4MWJbMTs5Mm1DbG9uaW5nIGZyb206ICcgKyB6CiAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgICAgIHByaW50ICdcdCBJbnZhbGlkIHVzZXIgXHgxYlswOzk3bScKICAgICAgICAgICAgcmF3X2lucHV0KCdceDFiWzE7OTJtUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpCiAgICAgICAgICAgIGF1dG9fY3JhY2soKQoKICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJy9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49JyArIHRva2VuICsgJyZsaW1pdD05OTk5OTknKQogICAgICAgIHogPSBqc29uLmxvYWRzKHIudGV4dCkKICAgICAgICBmb3IgaSBpbiB6WydkYXRhJ106CiAgICAgICAgICAgIHVpZCA9IGlbJ2lkJ10KICAgICAgICAgICAgbmEgPSBpWyduYW1lJ10KICAgICAgICAgICAgbm0gPSBuYS5yc3BsaXQoJyAnKVswXQogICAgICAgICAgICBpZC5hcHBlbmQodWlkICsgJ3wnICsgbm0pCgogICAgZWxpZiBhX3MgPT0gJzMnOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gTmFtZSArIE51bWJlciBwYXNzIEZpbGUgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nCiAgICAgICAgcHJpbnQgNDcgKiAnLScKICAgICAgICBwcmludCAnXHgxYlsxOzkzbUZvciBleGFtcGxlOjEyMywxMjM0LDEyMzQ1LDc4NiwxMiwxMTIyXHgxYlsxOzkxbScKICAgICAgICBwcmludCA0NyAqICctJwogICAKICAgICAgICBwYXNzNyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bN11QYXNzd29yZDogJykKICAgICAgICBwYXNzOCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bOF1QYXNzd29yZDogJykKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlkbGlzdCA9IHJhd19pbnB1dCgnWytdIEZpbGUgTmFtZTogJykKICAgICAgICAgICAgZm9yIGxpbmUgaW4gb3BlbihpZGxpc3QsICdyJykucmVhZGxpbmVzKCk6CiAgICAgICAgICAgICAgICBpZC5hcHBlbmQobGluZS5zdHJpcCgpKQoKICAgICAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1shXSBGaWxlIE5vdCBGb3VuZC4nCiAgICAgICAgICAgIHJhd19pbnB1dCgnUHJlc3MgRW50ZXIgVG8gQmFjay4gJykKICAgICAgICAgICAgY3JhY2soKQoKICAgIGVsaWYgYV9zID09ICcwJzoKICAgICAgICBtZW51KCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJycKICAgICAgICBwcmludCAnXHRDaG9vc2UgdmFsaWQgb3B0aW9uJyArIHcKICAgICAgICBhX3MoKQogICAgcHJpbnQgJyBUb3RhbCBpZHM6ICcgKyBzdHIobGVuKGlkKSkKICAgIHRpbWUuc2xlZXAoMC41KQogICAgcHJpbnQgJyBceDFiWzE7OTdtQ3JhY2sgUnVubmluZ1x4MWJbMTs5MW0gJwogICAgdGltZS5zbGVlcCgwLjUpCiAgICBwcmludCA0NyAqICctJwogICAgcHJpbnQgJ1x0XHgxYlsxOzk0bUp1dHQgS2luZyBPZiBGYWNlYm9va1x4MWJbMTs5MW0nCiAgICBwcmludCA0NyAqICctJwoKICAgIGRlZiBtYWluKGFyZyk6CiAgICAgICAgdXNlciA9IGFyZwogICAgICAgIHVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoJ3wnKQogICAgICAgIHRyeToKICAgICAgICAgICAgcGFzczEgPSBuYW1lLmxvd2VyKCkgKyBwMQogICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMSwgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMSArICdceDFiWzA7OTdtJwogICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczEgKyAnXG4nKQogICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMSkKICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczEKICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MxICsgJ1xuJykKICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkICsgcGFzczEpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwYXNzMiA9IG5hbWUubG93ZXIoKSArIHAyCiAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMiwgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMiArICdceDFiWzA7OTdtJwogICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMiArICdcbicpCiAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczIpCiAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczIKICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczIgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCArIHBhc3MyKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwYXNzMyA9IG5hbWUubG93ZXIoKSArIHAzCiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczMsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczMgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMyArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMykKICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MzCiAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczMgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkICsgcGFzczMpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcGFzczQgPSBuYW1lLmxvd2VyKCkgKyBwNAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzNCwgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzNCArICdceDFiWzA7OTdtJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczQgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzNCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M0ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M0KQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczUsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczUgKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczUgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M1ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M2LCBoZWFkZXJzPWhlYWRlcikudGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M2ICsgJ1x4MWJbMDs5N20nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczYgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M2ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzNywgaGVhZGVycz1oZWFkZXIpLnRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzNyArICdceDFiWzA7OTdtJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczcgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M3ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczgsIGhlYWRlcnM9aGVhZGVyKS50ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczggKyAnXHgxYlswOzk3bScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczggKyAnXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M4ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgogICAgcCA9IFRocmVhZFBvb2woMzApCiAgICBwLm1hcChtYWluLCBpZCkKICAgIHByaW50IDQ3ICogJy0nCiAgICBwcmludCAnIFx4MWJbMTs5Mm1DcmFjayBEb25lJwogICAgcHJpbnQgJyBceDFiWzE7OTJtVG90YWwgT2svQ3A6JyArIHN0cihsZW4ob2tzKSkgKyAnLycgKyBzdHIobGVuKGNwcykpCiAgICBwcmludCA0NyAqICctJwogICAgcmF3X2lucHV0KCcgXHgxYlsxOzkzbVByZXNzIGVudGVyIHRvIGJhY2snKQogICAgYXV0b19jcmFjaygpCgoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIGlwKCkKCg=="))